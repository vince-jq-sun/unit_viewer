<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Units Viewer Help</title>
    <link rel="stylesheet" href="style.css"> <!-- Assuming styles are in a separate CSS file -->
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
            display: flex;
            justify-content: center;
            flex-direction: column;  /* Changes flex direction to vertical */
            align-items: center;  /* Aligns content to the center */
        }
        .image-container {
            max-width: 950px;
            width: 100%;
            margin-bottom: 10px;
        }
        .container {
            max-width: 800px; /* Adjust this value based on your preference */
            width: 100%;
        }
        h1 {
            color: #333;
        }
        h2 {
            color: #555;
        }
        p, li {
            color: #666; /* Adjusted color for consistency */
            margin-bottom: 10px;
        }
        ul {
            margin-bottom: 20px;
            padding-left: 20px;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: monospace;
        }
        #fullWidthImage {
            width: 100%;  /* Makes the image span the full width of its container */
            height: auto;  /* Maintains the aspect ratio of the image */
            display: block;  /* Removes any space below the image */
        }
    </style>
    
</head>
<body>
    <div class="image-container">
        <img src="panel_introduction.jpg" id="fullWidthImage">
    </div>
    <div class="container">
        <div id="control-panel">
            <div class="title-with-version">
                <h1>Units Viewer Help</h1><span class="version">v1.0</span>
            </div>
            <div class="section">
                <h2>Use case</h2>
                <p>If you are working with tons of neurons/units, this simple tool helps you 
                    to systematically navigate through and inspect them to build better intuition for your projects. 
                    Basically, you view the full profile of a neuron at a time, tag it, make notes before moving to the next unit. 
                    The tags enables later flexible filtering. You can also start with your own pregenerated tag files.
                    In short, the tool helps you view thousands of images in an organized way and 
                    condense your intuition bit by bit into a single tagging file.</p>
            </div>
            <div class="section">
                <h2>Setup</h2>
                <p>The project is built with Node.js.
                    For instructions on installing Node.js, please see our <a href="install_node.html">Node.js Installation Guide</a> (generated by chatGPT).</p>
                <ul>
                    <li>Clone the whole git folder `units_viewer` or download and copy it somewhere. </li>
                    <li>In terminal, navigate to the folder, and install the required packages by running: <code>npm install</code></li>
                    <li>Place all the images inside `./units_figures`, organized by subfolders named with units' IDs</li>
                    <li>Optional: place your own tags.json file in `./units_tags`. This should be a JSON-formatted dictionary 
                        where keys are unit IDs, and values are lists of tags or notes. Notes are prefixed by `%`</li>
                </ul>
            </div>
            <div class="section">
                <h2>Starting the Viewer</h2>
                <ul>
                    <li>Make sure you at least have the images in the correct folders</li>
                    <li>In terminal (or IDE), navigate to `units_viewer`, execute <code>npm start</code>. 
                        The units viewer will likely appears in your default browser. </li>
                    <li>If not, open a browser and go to `http://localhost:2024`</li>
                    <li>If there's no .json file in `./units_tags`, you may create a new one by clicking <code>New Tag File</code> at the bottom. 
                        If successful, consider adding the names of all the image folders as keys to the new tag file.</li>
                </ul>
            </div>
            <div class="section">
                <h2>Navigating Units</h2>
                <p>The <code>(i/N)</code> following the bold unit ID indicates that there are 
                    N units in the current set of selection (with or without filtering) 
                and the current unit is i-th in it</p>
                <ul>
                    <li>Press <kbd>&#x2191;<kbd> or press <kbd>Ctrl</kbd>+<kbd>1</kbd> to move to the previous unit.</li>
                    <li>Press <kbd>&#x2193;<kbd> or press <kbd>Ctrl</kbd>+<kbd>2</kbd> to move to the next unit.</li>
                    <li>The dropdown box displays the name of the current tag file located in `./units_tags`</li>
                    <li>Use the dropdown list to select a different tag file, then click <code>load</code> to apply it.</li>
                </ul>
            </div>
            
            <div class="section">
                <h2>Editing Tags or Notes</h2>
                <ul>
                    <li>Enter a tag in the <code>text box</code>; click <code>+</code> or <code>-</code> to add it to or remove it from the current unit</li>
                    <li>Enter a note by prefixing with `%`; click <code>+</code> to <strong>add</strong> it to the current unit</li>
                    <li>To remove the i-th note, enter `%i`, click <code>-</code> to <strong>remove</strong> it from the current selection</li>
                </ul>
            </div>

            <div class="section">
                <h2>Display of Tags and Notes</h2>
                <p>You can add or remove tags associated with a neuron:</p>
                <ul>
                    <li>All tags associated with current <strong>selection of units</strong> are displayed and ranked by number of occurrences.</li>
                    <li>Only tags associated with the current <strong>unit</strong> are displayed in black ink.</li>
                    <li>Notes associated with the current unit are displayed with automatic index.</li>
                </ul>
            </div>

            <div class="section">
                <h2>Filtering Units</h2>
                <ul>
                    <li>Submit a filter by click <code>Filter</code>. Currently, only tags are filterable.</li>
                    <li>Logical operations supported: <code>&</code> (AND), <code>|</code> (OR), <code>!</code> (NOT). Priority: | < & < !</li>
                    <li>To exit from any filter (show the full set of units), click <code>Filter</code> with an empty <code>text box</code></li>
                </ul>
                <p>Example query:</p>
                <p><code>color | conflict & preSMA ! highrate</code> - The units selected by this query must contain 'preSMA', contain either 'color' or 'conflict', must not contain 'highrate'</p>
            </div>

            <div class="section">
                <h2>Adjusting Image Scale</h2>
                <ul>
                    <li>Adjust the scale of all the images by draging the slider</li>
                    <li>The default scale is automatically adjusted when the first unit is displayed</li>
                    <li>Click <code>Re-scale</code> to remap the slider to the images of the current unit. Basically, scale=1 is mapped to the currently highest image cover 80% of the window height.</li>
                </ul>
                <p>You can adjust the scale of the neuron images using the slider in the control panel. The scale value will be displayed next to the slider.</p>
            </div>

            <div class="section">
                <h2>Contact Support</h2>
                <p>If you encounter any issues or have questions, leave a message in git or email me at <code>vince.sun[at]nyu.edu</code></p>
            </div>

        </div>
    </div>
</body>
</html>
